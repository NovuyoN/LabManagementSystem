{% extends "base.html" %}
{% block title %}Test Categories | Lab Management System{% endblock %}
{% block content %}

<div class="container mt-4" style="max-width: 850px;">
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <h3 class="text-center text-primary mb-4">Manage Test Categories</h3>

      <!-- Add Category -->
      <form method="POST" action="{{ url_for('categories.view_categories') }}" class="row g-3 mb-4">
        <div class="col-md-9">
          <input type="text" name="name" class="form-control" placeholder="Enter new category name" required>
        </div>
        <div class="col-md-3 text-end">
          <button type="submit" class="btn btn-success w-100">Add Category</button>
        </div>
      </form>

      <!-- Categories Table -->
      {% if categories %}
      <table class="table table-striped table-hover align-middle">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Category Name</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for cat in categories %}
          <tr>
            <td>{{ cat.id }}</td>
            <td>{{ cat.name }}</td>
            <td>
              <form method="POST" action="{{ url_for('categories.edit_category', cat_id=cat.id) }}" class="d-inline">
                <input type="text" name="name" value="{{ cat.name }}" class="form-control d-inline w-auto" required>
                <button type="submit" class="btn btn-sm btn-outline-warning">Save</button>
              </form>

              <form method="POST" action="{{ url_for('categories.delete_category', cat_id=cat.id) }}" class="d-inline" onsubmit="return confirm('Delete this category?')">
                <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-muted text-center mt-3">No categories found.</p>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
